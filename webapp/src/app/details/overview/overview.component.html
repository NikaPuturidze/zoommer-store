<div class="overview">
  @if (product) {
    <div class="breadcrumbs-barcode-row">
      @if (viewportWidth > 1024) {
        <div class="breadcrumbs">
          <h4>{{ translations?.main }}</h4>
          <img src="https://zoommer.ge/icons/right-path.svg" />

          @for (path of product.breadcrumbs; track $index) {
            <h4>{{ path.name }}</h4>
            <img src="https://zoommer.ge/icons/right-path.svg" />
          }
        </div>
      } @else {
        <div class="breadcrumbs">
          <img src="https://zoommer.ge/icons/category-left-arr.svg" />
          <h4>{{ product.subCategoryName }}</h4>
        </div>
      }
      <div class="barcode">
        <img src="https://zoommer.ge/icons/share-line.svg" />
        <h4>#{{ product.barCode }}</h4>
      </div>
    </div>
    <div class="product-itself">
      <div class="visual">
        <div class="product-name">
          <h4>{{ product.name }}</h4>
          @if (viewportWidth <= 1024) {
            <div class="share">
              <img src="https://zoommer.ge/icons/share-line-black.svg" />
            </div>
          }
        </div>
        <div class="image-slider">
          <div class="heart">
            <img src="https://zoommer.ge/icons/product-details-heart.svg" />
          </div>
          <div class="slider-wrapper">
            <div class="images" [style.transform]="'translateX(' + product.translateX + '%)'">
              @for (imgPath of product.images; track $index) {
                <div class="plc">
                  <img [src]="imgPath" />
                </div>
              }
            </div>
          </div>
        </div>
        <div class="all-image-slider">
          @if (product.currentImage != 0) {
            <img (click)="previousImg()" class="left-arr" src="https://zoommer.ge/icons/slider-left-btn.svg" />
          }
          @if (product.currentImage != product.images.length - 1) {
            <img (click)="nextImg()" class="right-arr" src="https://zoommer.ge/icons/slider-right-btn.svg" />
          }
          @for (imgPath of product.images; track $index) {
            <div
              class="img-container"
              [style.border]="product.currentImage == $index ? '1px solid #ec5e2a' : 'none'"
              (click)="moveToSpecific($index)"
            >
              <div class="img">
                <img [src]="imgPath" />
              </div>
            </div>
          }
        </div>
      </div>
      @if (viewportWidth <= 1024) {
        <div class="utils">
          <div>
            <img src="https://zoommer.ge/icons/branch.svg" alt="" />
            <h5>{{ translations?.buy?.atBranches }}</h5>
          </div>
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              fill="none"
              viewBox="0 0 18 18"
              class="priceInsured ? 'active-reservation' : ''"
            >
              <path
                stroke="#515458"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M15.682 8.34c0 3.668-2.662 7.103-6.3 8.108a1.47 1.47 0 0 1-.765 0c-3.637-1.005-6.3-4.44-6.3-8.108V5.047c0-.615.465-1.312 1.043-1.545l4.177-1.71a3.9 3.9 0 0 1 2.933 0l4.177 1.71c.57.233 1.043.93 1.043 1.545z"
              ></path>
              <path
                stroke="#515458"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-miterlimit="10"
                stroke-width="1.5"
                d="M9 9.375a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M9 9.375v2.25"
              ></path>
            </svg>
            <h5>{{ translations?.buy?.insurance }}</h5>
          </div>
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              fill="none"
              viewBox="0 0 18 18"
              class="priceControlled ? 'active-price-controll' : ''"
            >
              <path
                stroke="#515458"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M11.685 9c0 1.485-1.2 2.685-2.685 2.685A2.68 2.68 0 0 1 6.315 9c0-1.485 1.2-2.685 2.685-2.685s2.685 1.2 2.685 2.685"
              ></path>
              <path
                stroke="#515458"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M9 15.203c2.647 0 5.115-1.56 6.832-4.26.675-1.058.675-2.835 0-3.893C14.115 4.35 11.647 2.79 9 2.79S3.885 4.35 2.167 7.05c-.675 1.058-.675 2.835 0 3.893 1.718 2.7 4.185 4.26 6.833 4.26"
              ></path>
            </svg>
            <h5>{{ translations?.buy?.control }}</h5>
          </div>
          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              fill="none"
              viewBox="0 0 18 18"
              class="priceReserved ? 'active-reservation' : ''"
            >
              <path
                stroke="#515458"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M4.5 7.5V6c0-2.482.75-4.5 4.5-4.5s4.5 2.018 4.5 4.5v1.5M9 13.875a1.875 1.875 0 1 0 0-3.75 1.875 1.875 0 0 0 0 3.75"
              ></path>
              <path
                stroke="#515458"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M12.75 16.5h-7.5c-3 0-3.75-.75-3.75-3.75v-1.5c0-3 .75-3.75 3.75-3.75h7.5c3 0 3.75.75 3.75 3.75v1.5c0 3-.75 3.75-3.75 3.75"
              ></path>
            </svg>
            <h5>{{ translations?.buy?.reservation }}</h5>
          </div>
        </div>
      }
      <div class="specifications">
        <div class="main-specifications">
          @for (mainSpec of product.mainSpecification; track $index) {
            <div>
              <h4 class="specification-name">{{ mainSpec.specificationName }}</h4>
              <h4 class="specification-meaning">{{ mainSpec.specificationMeaning }}</h4>
            </div>
          }
        </div>
        <div class="key-specifications">
          @for (spec of product.keySpecification; track $index) {
            @if (spec.isColor) {
              <div class="color">
                <div class="current-color">
                  <h4>
                    {{ spec.specificationName }}: <span>{{ spec.specificationMeaning }}</span>
                  </h4>
                </div>
                <div class="colors">
                  @for (color of spec.specificationMeaningsList; track $index) {
                    <div (click)="navigate([color.route])" [style.backgroundColor]="color.value">
                      @if (color.isSelected) {
                        <img src="	https://zoommer.ge/icons/color-elipse.svg" />
                      }
                    </div>
                  }
                </div>
              </div>
            }
          }

          @for (spec of product.keySpecification; track $index) {
            @if (!spec.isColor) {
              <div class="key-spec">
                <div class="current-spec">
                  <h4>
                    {{ spec.specificationName }}: <span>{{ spec.specificationMeaning }}</span>
                  </h4>
                </div>
                <div class="specs">
                  @for (memory of spec.specificationMeaningsList; track $index) {
                    <div
                      (click)="navigate([memory.route])"
                      [style.background]="memory.isSelected ? '#ec5e2a' : 'transparent'"
                      [style.border]="memory.isSelected ? '1px solid #ec5e2a' : '1px solid #000'"
                      [style.opacity]="memory.isSelected ? '1' : '0.5'"
                    >
                      <h4 [style.color]="memory.isSelected ? '#fff' : '#000'">
                        {{ memory.value }}
                      </h4>
                    </div>
                  }
                </div>
              </div>
            }
          }
        </div>
      </div>
    </div>
  }
</div>
